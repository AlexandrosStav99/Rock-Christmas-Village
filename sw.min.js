self.addEventListener("fetch",(t=>{if("GET"!==t.request.method)return;const e=new URL(t.request.url),c="http:"===e.protocol||"https:"===e.protocol,n=e.origin===self.location.origin;c&&n&&("document"!==t.request.destination?t.respondWith(caches.match(t.request).then((e=>e||fetch(t.request).then((async e=>{if(e&&e.ok)try{const c=e.clone(),n=await caches.open(CACHE_NAME);await n.put(t.request,c)}catch(t){}return e}))))):t.respondWith(fetch(t.request).then((async e=>{if(e&&e.ok)try{const c=e.clone(),n=await caches.open(CACHE_NAME);await n.put(t.request,c)}catch(t){}return e})).catch((()=>caches.match(t.request)))))}));