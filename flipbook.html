<!DOCTYPE html>
<html lang="el">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Rock Christmas Village</title>

    <!-- ============================================
       FAVICON & MOBILE ICONS
       ============================================ -->
    <link rel="icon" type="image/x-icon" href="/assets/favicon/favicon.ico" />
    <link rel="icon" type="image/svg+xml" href="/assets/favicon/favicon.svg" />
    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="/assets/favicon/favicon-32x32.png"
    />

    <link
      rel="icon"
      type="image/png"
      sizes="96x96"
      href="/assets/favicon/favicon-96x96.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="48x48"
      href="/assets/favicon/favicon-48x48.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="180x180"
      href="/assets/favicon/apple-touch-icon.png"
    />
    <link rel="manifest" href="/site.webmanifest" />
    <meta name="theme-color" content="#3b1416" />
    <meta name="apple-mobile-web-app-status-bar-style" content="#3b1416" />
    <meta name="msapplication-TileColor" content="#3b1416" />
    <meta name="msapplication-config" content="/browserconfig.xml" />

    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      :root {
        --maroon: #3b1416;
        --bronze: #936336;
        --pink: #d3a096;
        --cream: #f7f3ee;
        --charcoal: #2b2a2a;
      }

      html,
      body {
        height: 100%;
        overflow: hidden; /* Prevent page scrolling */
      }

      body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
          sans-serif;
        background-color: var(--cream);
        color: var(--charcoal);
        line-height: 1.6;
      }

      /* Main Layout Container */
      .main-layout {
        display: grid;
        grid-template-columns: 1fr 320px; /* Flipbook | Sidebar */
        gap: 20px;
        height: 100vh;
        padding: 20px;
      }

      /* Left Column - Flipbook */
      .flipbook-column {
        display: flex;
        flex-direction: column;
        gap: 15px;
        min-width: 0; /* Prevent overflow */
      }

      .flipbook-title {
        text-align: center;
        color: var(--maroon);
        font-size: 2rem;
        font-weight: 700;
        margin: 0;
        padding: 10px 0;
      }

      .flipbook-title .highlight {
        color: var(--bronze);
      }

      /* Flipbook wrapper */
      .flipbook-wrapper {
        position: relative;
        flex: 1;
        background: white;
        border-radius: 15px;
        box-shadow: 0 10px 40px rgba(59, 20, 22, 0.15);
        overflow: hidden;
        display: flex;
        flex-direction: column;
        min-height: 0; /* Important for flex children */
      }

      .page-display {
        position: relative;
        flex: 1;
        display: flex;
        justify-content: center;
        align-items: center;
        overflow: hidden;
        min-height: 0;
        max-height: 970px;
      }

      .page-display img {
        max-width: 100%;
        max-height: 100%;
        width: auto;
        height: auto;
        object-fit: contain;
        display: none;
        position: absolute;
        box-shadow: 2px 2px 10px rgba(0, 0, 0, 0.1);
      }

      .page-display img.active {
        display: block;
        position: relative;
      }

      /* Slide animations */
      @keyframes slideOutLeft {
        from {
          transform: translateX(0);
          opacity: 1;
        }
        to {
          transform: translateX(-100%);
          opacity: 0;
        }
      }

      @keyframes slideInRight {
        from {
          transform: translateX(100%);
          opacity: 0;
        }
        to {
          transform: translateX(0);
          opacity: 1;
        }
      }

      @keyframes slideOutRight {
        from {
          transform: translateX(0);
          opacity: 1;
        }
        to {
          transform: translateX(100%);
          opacity: 0;
        }
      }

      @keyframes slideInLeft {
        from {
          transform: translateX(-100%);
          opacity: 0;
        }
        to {
          transform: translateX(0);
          opacity: 1;
        }
      }

      .page-display img.slide-out-left {
        animation: slideOutLeft 0.5s ease-in-out forwards;
      }

      .page-display img.slide-in-right {
        animation: slideInRight 0.5s ease-in-out forwards;
      }

      .page-display img.slide-out-right {
        animation: slideOutRight 0.5s ease-in-out forwards;
      }

      .page-display img.slide-in-left {
        animation: slideInLeft 0.5s ease-in-out forwards;
      }

      /* Loading state */
      .loading-state {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        text-align: center;
        color: var(--bronze);
        z-index: 10;
      }

      .spinner {
        width: 50px;
        height: 50px;
        border: 4px solid rgba(147, 99, 54, 0.2);
        border-top-color: var(--bronze);
        border-radius: 50%;
        animation: spin 1s linear infinite;
        margin: 0 auto 15px;
      }

      @keyframes spin {
        to {
          transform: rotate(360deg);
        }
      }

      /* Controls */
      .flipbook-controls {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 1.5rem;
        padding: 1rem;
        background: white;
        border-top: 1px solid rgba(59, 20, 22, 0.1);
      }

      .control-btn {
        background: var(--bronze);
        color: white;
        border: none;
        padding: 0.7rem 1.5rem;
        font-size: 0.95rem;
        font-weight: 600;
        border-radius: 30px;
        cursor: pointer;
        transition: all 0.3s;
        display: flex;
        align-items: center;
        gap: 0.5rem;
        white-space: nowrap;
      }

      .control-btn:hover:not(:disabled) {
        background: var(--pink);
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(147, 99, 54, 0.3);
      }

      .control-btn:disabled {
        opacity: 0.4;
        cursor: not-allowed;
      }

      .control-btn:active:not(:disabled) {
        transform: translateY(0);
      }

      .page-info {
        font-size: 1rem;
        font-weight: 600;
        color: var(--charcoal);
      }

      .page-number {
        color: var(--bronze);
      }

      /* Right Column - Sidebar */
      .sidebar-column {
        display: flex;
        flex-direction: column;
        justify-content: space-evenly;
        gap: 20px;
        overflow-y: auto; /* Allow sidebar to scroll if needed */
        padding-right: 5px;
      }

      /* Sidebar sections */
      .sidebar-section {
        background: white;
        border-radius: 15px;
        padding: 1.5rem;
        box-shadow: 0 4px 20px rgba(59, 20, 22, 0.1);
      }

      .sidebar-title {
        font-size: 1.3rem;
        color: var(--maroon);
        margin-bottom: 1rem;
        font-weight: 700;
        text-align: center;
      }

      .sidebar-subtitle {
        font-size: 0.9rem;
        color: var(--charcoal);
        opacity: 0.8;
        text-align: center;
        margin-bottom: 1rem;
      }

      /* Download buttons */
      .download-buttons {
        display: flex;
        flex-direction: column;
        gap: 0.8rem;
      }

      .download-btn {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 0.8rem;
        padding: 0.9rem 1.2rem;
        background: var(--bronze);
        color: white;
        text-decoration: none;
        border-radius: 30px;
        font-weight: 600;
        font-size: 0.9rem;
        transition: all 0.3s;
        text-align: center;
      }

      .download-btn:hover {
        background: var(--pink);
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(147, 99, 54, 0.3);
      }

      .flag-icon {
        width: 20px;
        height: 20px;
        object-fit: contain;
        flex-shrink: 0;
      }

      /* Info cards */
      .info-list {
        display: flex;
        flex-direction: column;
        gap: 0.8rem;
      }

      .info-item {
        display: flex;
        align-items: center;
        gap: 0.8rem;
        padding: 0.8rem;
        background: rgba(147, 99, 54, 0.05);
        border-radius: 10px;
        font-size: 0.85rem;
      }

      .info-icon {
        font-size: 1.3rem;
        flex-shrink: 0;
      }

      .info-text {
        flex: 1;
        color: var(--charcoal);
        line-height: 1.4;
      }

      /* Keyboard hints */
      .keyboard-hints {
        background: rgba(147, 99, 54, 0.05);
        padding: 1rem;
        border-radius: 10px;
        font-size: 0.85rem;
        text-align: center;
        color: var(--charcoal);
        opacity: 0.8;
      }

      .keyboard-hints kbd {
        background: white;
        padding: 0.2rem 0.5rem;
        border-radius: 4px;
        font-family: monospace;
        font-weight: 600;
        color: var(--bronze);
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
      }

      /* Custom scrollbar for sidebar */
      .sidebar-column::-webkit-scrollbar {
        width: 8px;
      }

      .sidebar-column::-webkit-scrollbar-track {
        background: transparent;
      }

      .sidebar-column::-webkit-scrollbar-thumb {
        background: var(--bronze);
        border-radius: 10px;
      }

      .sidebar-column::-webkit-scrollbar-thumb:hover {
        background: var(--pink);
      }

      /* Responsive - Stack on smaller screens */
      @media (max-width: 1024px) {
        .main-layout {
          grid-template-columns: 1fr;
          grid-template-rows: 1fr auto;
          gap: 15px;
          padding: 15px;
        }

        .flipbook-column {
          min-height: 0;
        }

        .sidebar-column {
          max-height: 250px;
          overflow-y: auto;
          display: grid;
          grid-template-columns: 1fr 1fr;
          gap: 15px;
        }

        .flipbook-title {
          font-size: 1.5rem;
          padding: 5px 0;
        }

        .sidebar-section {
          padding: 1rem;
        }

        .sidebar-title {
          font-size: 1.1rem;
          margin-bottom: 0.8rem;
        }

        .download-btn {
          padding: 0.7rem 1rem;
          font-size: 0.85rem;
        }

        .info-item {
          padding: 0.6rem;
          font-size: 0.8rem;
        }

        .control-btn {
          padding: 0.6rem 1.2rem;
          font-size: 0.85rem;
        }

        .page-info {
          font-size: 0.9rem;
        }
      }

      @media (max-width: 640px) {
        .main-layout {
          padding: 10px;
          gap: 10px;
        }

        .sidebar-column {
          grid-template-columns: 1fr;
          max-height: 200px;
        }

        .flipbook-controls {
          gap: 0.8rem;
          padding: 0.8rem;
          flex-wrap: wrap;
        }

        .control-btn {
          padding: 0.5rem 1rem;
          font-size: 0.8rem;
        }

        .page-info {
          width: 100%;
          order: -1;
        }

        /* Faster animations on mobile */
        .page-display img.slide-out-left,
        .page-display img.slide-in-right,
        .page-display img.slide-out-right,
        .page-display img.slide-in-left {
          animation-duration: 0.3s;
        }
      }
    </style>
  </head>
  <body>
    <div class="main-layout">
      <!-- LEFT COLUMN - Flipbook -->
      <div class="flipbook-column">
        <div class="flipbook-wrapper">
          <!-- Page Display -->
          <div class="page-display" id="pageDisplay">
            <div class="loading-state" id="loadingState">
              <div class="spinner"></div>
              <div>Œ¶œåœÅœÑœâœÉŒ∑ œÉŒµŒªŒØŒ¥œâŒΩ...</div>
            </div>
            <!-- Images will be injected here by JavaScript -->
          </div>

          <!-- Controls -->
          <div class="flipbook-controls">
            <button class="control-btn" id="prevBtn">
              <span>‚Üê</span>
              <span>Œ†œÅŒøŒ∑Œ≥ŒøœçŒºŒµŒΩŒ∑</span>
            </button>

            <div class="page-info">
              Œ£ŒµŒªŒØŒ¥Œ± <span class="page-number" id="currentPage">1</span> Œ±œÄœå
              <span id="totalPages">40</span>
            </div>

            <button class="control-btn" id="nextBtn">
              <span>ŒïœÄœåŒºŒµŒΩŒ∑</span>
              <span>‚Üí</span>
            </button>
          </div>
        </div>
      </div>

      <!-- RIGHT COLUMN - Sidebar -->
      <aside class="sidebar-column">
        <!-- Download Section -->
        <section class="sidebar-section">
          <div class="download-buttons">
            <a
              href="./assets/rock-christmas-kakopetria-schedule.pdf"
              target="_blank"
              rel="noopener noreferrer"
              class="download-btn"
            >
              <img src="./assets/greek.png" alt="Greek" class="flag-icon" />
              <span>ŒïŒªŒªŒ∑ŒΩŒπŒ∫ŒÆ ŒàŒ∫Œ¥ŒøœÉŒ∑</span>
            </a>
            <a
              href="./assets/en-rock-christmas-kakopetria-schedule.pdf"
              target="_blank"
              rel="noopener noreferrer"
              class="download-btn"
            >
              <img
                src="./assets/united-kingdom.png"
                alt="English"
                class="flag-icon"
              />
              <span>English Version</span>
            </a>
          </div>
        </section>

        <!-- Quick Info Section -->
        <section class="sidebar-section">
          <h2 class="sidebar-title">‚ÑπÔ∏è Œ†ŒªŒ∑œÅŒøœÜŒøœÅŒØŒµœÇ</h2>
          <div class="info-list">
            <div class="info-item">
              <span class="info-icon">üìÖ</span>
              <span class="info-text"
                ><strong>ŒóŒºŒµœÅŒøŒºŒ∑ŒΩŒØŒµœÇ:</strong><br />22 ŒùŒøŒ≠ŒºŒ≤œÅŒπŒøœÖ 2025 ‚Äì 6
                ŒôŒ±ŒΩŒøœÖŒ±œÅŒØŒøœÖ 2026</span
              >
            </div>

            <div class="info-item">
              <span class="info-icon">üïê</span>
              <span class="info-text"
                ><strong>ŒèœÅŒµœÇ:</strong><br />ŒöŒ±Œ∏Œ∑ŒºŒµœÅŒπŒΩŒ¨ 11:00 ‚Äì 19:00</span
              >
            </div>
          </div>
        </section>
      </aside>
    </div>

    <!-- CUSTOM JAVASCRIPT - NO DEPENDENCIES -->
    <script>
      // ========================================
      // FLIPBOOK CONFIGURATION
      // ========================================
      const FLIPBOOK_CONFIG = {
        totalPages: 40,
        imagePath: "./Images/Schedule/",
        imageFormat: ".webp",
        startPage: 1,
        animationDuration: 500, // milliseconds
      };

      // ========================================
      // STATE MANAGEMENT
      // ========================================
      let currentPage = FLIPBOOK_CONFIG.startPage;
      let imagesLoaded = 0;
      let isAnimating = false;
      const totalPages = FLIPBOOK_CONFIG.totalPages;

      // ========================================
      // DOM ELEMENTS
      // ========================================
      const pageDisplay = document.getElementById("pageDisplay");
      const loadingState = document.getElementById("loadingState");
      const currentPageSpan = document.getElementById("currentPage");
      const totalPagesSpan = document.getElementById("totalPages");
      const prevBtn = document.getElementById("prevBtn");
      const nextBtn = document.getElementById("nextBtn");

      // ========================================
      // INITIALIZE FLIPBOOK
      // ========================================
      function initFlipbook() {
        totalPagesSpan.textContent = totalPages;

        for (let i = 1; i <= totalPages; i++) {
          const img = document.createElement("img");
          img.src = `${FLIPBOOK_CONFIG.imagePath}${i}${FLIPBOOK_CONFIG.imageFormat}`;
          img.alt = `Page ${i}`;
          img.dataset.page = i;

          img.onload = function () {
            imagesLoaded++;
            if (imagesLoaded === totalPages) {
              hideLoading();
              showPage(currentPage, null);
            }
          };

          img.onerror = function () {
            console.error(`‚ùå Failed to load page ${i}`);
            imagesLoaded++;
            if (imagesLoaded === totalPages) {
              hideLoading();
              showPage(currentPage, null);
            }
          };

          pageDisplay.appendChild(img);
        }

        setupEventListeners();
      }

      // ========================================
      // PAGE NAVIGATION WITH SLIDING ANIMATION
      // ========================================
      function showPage(pageNum, direction) {
        if (pageNum < 1 || pageNum > totalPages) {
          console.warn("Invalid page number:", pageNum);
          return;
        }

        if (isAnimating) {
          return;
        }

        const oldPage = currentPage;
        currentPage = pageNum;

        const oldImg = pageDisplay.querySelector(`img[data-page="${oldPage}"]`);
        const newImg = pageDisplay.querySelector(`img[data-page="${pageNum}"]`);

        if (!newImg) {
          console.error("New page image not found!");
          return;
        }

        if (!direction) {
          pageDisplay.querySelectorAll("img").forEach((img) => {
            img.classList.remove("active");
            img.className = "";
          });
          newImg.classList.add("active");
          updateUI();
          return;
        }

        isAnimating = true;

        oldImg?.classList.remove(
          "slide-out-left",
          "slide-in-right",
          "slide-out-right",
          "slide-in-left"
        );
        newImg.classList.remove(
          "slide-out-left",
          "slide-in-right",
          "slide-out-right",
          "slide-in-left"
        );

        newImg.classList.add("active");

        if (direction === "next") {
          oldImg?.classList.add("slide-out-left");
          newImg.classList.add("slide-in-right");
        } else {
          oldImg?.classList.add("slide-out-right");
          newImg.classList.add("slide-in-left");
        }

        setTimeout(() => {
          oldImg?.classList.remove(
            "active",
            "slide-out-left",
            "slide-out-right"
          );
          isAnimating = false;
          updateUI();
        }, FLIPBOOK_CONFIG.animationDuration);

        updateUI();
      }

      function nextPage() {
        if (currentPage < totalPages && !isAnimating) {
          showPage(currentPage + 1, "next");
        }
      }

      function prevPage() {
        if (currentPage > 1 && !isAnimating) {
          showPage(currentPage - 1, "prev");
        }
      }

      // ========================================
      // UI UPDATES
      // ========================================
      function updateUI() {
        currentPageSpan.textContent = currentPage;
        prevBtn.disabled = currentPage === 1 || isAnimating;
        nextBtn.disabled = currentPage === totalPages || isAnimating;
      }

      function hideLoading() {
        loadingState.style.display = "none";
      }

      // ========================================
      // EVENT LISTENERS
      // ========================================
      function setupEventListeners() {
        prevBtn.addEventListener("click", prevPage);
        nextBtn.addEventListener("click", nextPage);

        document.addEventListener("keydown", function (e) {
          if (isAnimating) return;

          switch (e.key) {
            case "ArrowLeft":
              prevPage();
              break;
            case "ArrowRight":
              nextPage();
              break;
          }
        });

        let touchStartX = 0;
        let touchEndX = 0;

        pageDisplay.addEventListener("touchstart", function (e) {
          touchStartX = e.changedTouches[0].screenX;
        });

        pageDisplay.addEventListener("touchend", function (e) {
          if (isAnimating) return;

          touchEndX = e.changedTouches[0].screenX;
          handleSwipe();
        });

        function handleSwipe() {
          const swipeThreshold = 50;
          if (touchEndX < touchStartX - swipeThreshold) {
            nextPage();
          }
          if (touchEndX > touchStartX + swipeThreshold) {
            prevPage();
          }
        }
      }

      // ========================================
      // START THE FLIPBOOK
      // ========================================
      document.addEventListener("DOMContentLoaded", function () {
        initFlipbook();
      });

      // ========================================
      // PUBLIC API
      // ========================================
      window.FlipbookAPI = {
        goToPage: (page) => showPage(page, null),
        next: nextPage,
        prev: prevPage,
        getCurrentPage: () => currentPage,
        getTotalPages: () => totalPages,
      };
    </script>
  </body>
</html>
